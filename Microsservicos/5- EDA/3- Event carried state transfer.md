Bom, pessoal, agora a gente vai falar sobre um outro tipo de evento, chamado de Event Carried State Transfer. Para que serve esse cara, como esse cara funciona. Bom, esse tipo de evento, no final das contas, é um evento de stream. O que isso significa? Significa que ele é um evento que carrega todos os dados que aconteceram. Então, diferentemente do Event Notification Only, onde o que importa para gente é a mudança de estado, no Event Carried State Transfer, o que importa para a gente não é apenas a mudança de estado, mas sim o dado em si.

Vamos imaginar que a gente tem uma compra que aconteceu, e a compra, assim que foi aprovada, a gente tem que emitir a nota fiscal. No caso de uma nota fiscal, apenas falar que o status foi aprovado não vai resolver. Por quê? Porque para emitir a nota fiscal, eu preciso saber o nome do produto, os dados de compra, sei lá, o CPF, o imposto que eu vou pagar, o preço que foi colocado… eu preciso saber um monte de informação. Então, esse tipo de informação não é só uma mudança simples de estado, esse tipo de informação traz o dado em si, porque com esse dado ele pode executar o processamento e a execução de uma tarefa. Esse tipo de evento, muitas vezes, é necessário, porque sem os dados completos, os sistemas não conseguem fazer o processamento da forma como ele trabalha. Mas normalmente você vai ver que esse tipo de cara só é utilizado quando essas informações são realmente necessárias, porque quando elas não são, você vai utilizar  Event Notification.

É muito comum, quando você for trabalhar com sistemas, você trabalhar de forma híbrida. Você vai trabalhar tanto com Event Notification quanto com Event Carry State Transfer, porque em certos momentos você precisa dos dados completos, mas em outros momentos você precisa apenas da mudança de estado. E, isso vai trazer, de forma muito mais inteligente, as decisões que você vai tomar quando os sistemas produzirem eventos e quando os sistemas precisam dessas informações. Então sempre se lembre, quando você utilizar um e outro, qual é o grande problema de muita gente, de muitos sistemas, que quando a volumetria muda? Eles acabam trazendo problemas. É que muitos sistemas acabam trabalhando apenas dessa forma, com Event Carry State Transfer. E o que acontece? É muito dado sendo trafegado na rede e, muitas vezes, esses dados não são tão necessários. Quando a gente começa a ter um volume muito grande nesses sistemas, simplesmente a rede congestiona, os sistemas ficam mais lentos, sendo que o Event Notification já  resolveria. É importante você ter essa consciência para que, de forma intencional, você escolha quando e qual tipo de evento vai ser lançado.

Eu acho que o mais interessante de tudo, principalmente desses conceitos que eu estou trazendo para você, é que a implementação de como você vai fazer isso é o de menos. Mas o importante é que você tome decisões de forma intencional e quando você toma decisões de forma intencional, você consegue ser muito mais assertivo. E para você tomar decisões intencionais, você tem que saber quais são as opções que você tem. E é aqui que eu estou trazendo as opções, para que você consiga trabalhar da forma mais otimizada possível nos seus sistemas. Então, vamos nessa, porque a gente tem mais uma forma de a gente trabalhar. Vamos nessa!