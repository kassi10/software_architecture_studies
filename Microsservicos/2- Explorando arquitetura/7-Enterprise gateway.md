Bom, pessoal, no vídeo anterior a gente falou aqui sobre API Gateway e etc, mas nesse momento eu queria apenas fazer uma tangente para deixar um pouco claro sobre essa história de API Gateway, principalmente em relação à classificação. Eu quero classificar aqui para vocês em duas partes quando a gente falar sobre API Gateway. Uma parte em relação à classificação de API Gateway é a parte de API Gateways que são Enterprise.

(Deixa eu copiar aqui somente para deixar mais claro aqui para vocês). O que é uma Gateway Enterprise? Uma Enterprise Gateway expõe serviços e essa exposição de serviços pode ser tanto interna ou externa. Ela fica ali no front, na borda dos seus microsserviços. Não que uma micro API Gateway não possa fazer isso, até pode, mas você vai entender que ela tem mais recursos e mais facilidades. Porque você consegue gerenciar essas APIs externas e internas, você consegue ver o ciclo completo de vida da chamada ali da sua API. E o porquê você consegue fazer isso? Porque de forma automática, através de um portal normalmente que tem do desenvolvedor ou um portal de gerenciamento de API Gateway, você consegue fazer o que no final das contas? Falar olha esse cara vai para esse lado com essas regras, com essa política. Você consegue ver as chamadas. Você consegue trabalhar com tudo ali naquele momento. Existem diversas empresas que provêm sistemas de API Gateways num formato mais Enterprise para você acompanhar tudo desde o início.

Normalmente, também nesses tipos de Gateways mais Enterprise, você consegue setar nela qual é o ambiente que você está rodando. Se é um ambiente de dev, se é um ambiente de produção, se é um ambiente de testes, porque você consegue trabalhar de uma forma mais multi-tenant, então, isso vai ajudar bastante a você conseguir trabalhar. Além disso, normalmente, essas Gateways trazem recursos absurdamente fantásticos. Recursos que vão te ajudar a fazer conversão de dados, para fazer acesso a dados diretamente. Elas vão conseguir injetar dados em cabeçalho, conseguem fazer um baita malabarismo para que você consiga fazer melhor as integrações dos sistemas. Eu conheço, por exemplo, sistemas que foram feitos na década da onça, e os caras colocaram uma Enterprise API Gateway na frente e conseguiram disponibilizar APIs REST, sendo que a aplicação não foi feita com Endpoints REST para você trabalhar. Então, ela faz toda a conversão. Ela toma todos esses cuidados para vocês.

As API Gateways também, normalmente, com uma request que você chama, pode fazer múltiplas chamadas ao mesmo tempo, pegar os dados, combinar os dados num único formato e retornar. O grande ponto é que essas API Gateways têm tantos recursos que, dependendo do recurso que você tem, você vai ficar preso a ela, é como um Cloud Provider. Você começa a usar recursos específicos e o que vai acontecer, você vai ter um lock-in que cada vez vai ficar mais difícil de você deixar esse vendor. Uma coisa que normalmente acontece com esses tipos de Gateway é o seguinte: elas possuem dependência externa. Isso significa que com essa dependência externa, ela precisa, por exemplo, controlar estado, então, muitas vezes esses tipos de API Gateway utilizam banco de dados, e toda vez que você acessar ela, ou ela vai fazer uma chamada para um banco de dados, ou ela vai fazer uma chamada de cache. Ou seja, ela vai utilizar diversas estratégias para responder da forma mais rápida possível, mas ainda assim ela possui dependência externa, e nesse momento você vai brigar ou pela consistência dos dados ou pela disponibilidade. Se o banco cair, provavelmente o que vai acontecer? Ela vai trazer o resultado mais antigo, então, ela vai deixar de ser consistente para ficar disponível, ou se você precisa muito de consistência, você vai deixar a disponibilidade e vai poder ter downtime. Então, um grande problema de utilizar essas API Gateways, problema entre aspas, é que elas têm essas dependências, normalmente é característica delas, mas normalmente funcionam muito bem.

Exemplo de API Gateway da Sensedia, uma empresa conhecidíssima aqui no Brasil. Se você olhar as API Gateways dos Cloud Providers, da Amazon e etc, são API Gateways que a gente pode considerar de uma forma Enterprise. No próximo vídeo, eu quero falar aqui com vocês sobre as mini barra micro API Gateways que são baseados nos exemplos que eu dei aqui anteriormente. Então, vamos nessa!