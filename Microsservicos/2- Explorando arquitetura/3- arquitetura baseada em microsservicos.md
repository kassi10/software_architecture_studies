Bom pessoal, agora que a gente viu um pouco sobre o 12 Factor App, eu deixei algumas dicas aqui para você, que provavelmente você vai encontrar lá no 12 Factor App, eu vou até escrever aqui do lado para você não esquecer, que é o 12 Factor App. Então, eu quero falar um pouco sobre a arquitetura baseada em microsserviços, partindo desse ponto aqui.

Então, vamos ver qual é o nosso desenhinho dessa vez, e depois a gente vai falar um pouco sobre algumas complexidades, vamos lá. Na arquitetura baseada em microsserviços, você vai perceber que essa arquitetura muda completamente em relação a essa aqui de cima, e o porquê isso acontece? Porque agora cada componente que estava no monolito pode virar um serviço, ou seja, ele pode virar uma aplicação, e isso fazendo e gerando muitos efeitos colaterais na sua aplicação. Quais são esses efeitos? Bom, a primeira coisa que você vai perceber, e que você tem que ter em mente a todo momento, é que todas as vezes que você trabalhar com uma arquitetura baseada em microsserviços, os microsserviços obviamente vão se comunicar. Então, perceba esse se comunica com esse, com esse, com esse, com esse, assim vai. Esses caras podem se comunicar à vontade normalmente, obviamente você pode estabelecer algumas regras de rede, coisas desse tipo, quando não faz sentido um microsserviço se comunicar com outro. Mas a pegadinha de tudo aqui é a seguinte, é isso aqui que eu estou colocando, por que eu coloquei x aqui? 3 milissegundos. O que significa? Cada vez que a gente faz uma chamada para um microsserviço, e esse microsserviço tem que chamar outro, que chamar outro, que chamar outro, que chamar outro, cada vez que essa chamada aqui vai acontecer via rede, você tem uma latência aqui. Essa latência que você tem aqui, você não tem aqui no caso de um monolito clássico. Então, o que vai acontecer aqui nesse caso? Vamos imaginar que para cada chamada ele demore, sei lá, 20 milissegundos. Então, aqui ele vai demorar 20, depois mais 20, 40, a seguir mais 40, 60, 80, até retornar mais uma chamada aqui, 100 milissegundos. Então, oque significa, aqui no meio dessa história, que você pode demorar até 100 milissegundos para responder o usuário final. Sendo que aqui você não teria esse problema e provavelmente, dependendo da situação, você responderia muito mais rapidamente. O que que eu estou querendo dizer? Eu não estou querendo dizer que a arquitetura baseada em microsserviços é mais lenta que uma arquitetura monolítica. Mas ela pode ser, dependendo da forma de como você organiza e separa os seus microsserviços.

Olha só,  às vezes, você quer usar microsserviços porque simplesmente você quer. Você não tem até uma justificativa plausível e o máximo que você vai conseguir é elevar os custos e aumentar a latência, ou seja, você vai entregar mais devagar os dados do que você entregaria com um monolito. Obviamente, como eu falei para vocês, quando você tem muitos microsserviços, muitos contextos, muitos desenvolvedores, você trabalha assim dessa forma, mas obviamente que você tem que ter estratégias para evitar essa chamada dominó de uma forma ou de outra e o mais importante, você também tem que ter estratégias para você entender quando você precisa disponibilizar o dado em tempo real, porque você vai perceber que quanto maior é o sistema, raramente você vai ter que entregar o dado na hora ou entregar o dado super quente ali.

Um outro ponto importante aqui que eu quero que você leve em consideração é que, normalmente,  ou via de regra, cada microsserviço tem o seu próprio banco de dados, então, aqui nesse caso a gente pode explorar outras opções. Por exemplo, aqui eu estou utilizando um QValueStore, utilizando um banco de dados relacional e assim vai. Então, nesse ponto, você pode sim aproveitar e utilizar o melhor banco de dados para melhor situação em relação aos microsserviços. Pense bem, mas novamente, não adianta você também pegar um banco de dados mais hypado do momento, que ninguém conhece, que só você conhece, que ninguém da equipe nunca ouviu falar e colocar somente porque é cool. Entenda bem o banco de dados para você fazer a sua escolha. Por outro lado, você tem um pouco mais de liberdade. Você tem liberdade de tecnologia, você tem liberdade de banco de dados, muitas vezes você vai poder utilizar mais do que um banco de dados na mesma aplicação e assim vai.

Agora, um ponto importante aqui também que eu estou colocando, e se você perceber, eu coloquei uma seta direta aqui, o que eu estou querendo dizer aqui é que um microsserviço chama diretamente o outro microsserviço de forma síncrona.  Não de forma assíncrona. A gente vai evoluir nessa ideia e mostrar essa diferença aqui porque muda completamente o jogo quando você começa a trabalhar de forma assíncrona, ao invés de trabalhar de forma síncrona. Então, essa é a ideia de uma arquitetura baseada em microsserviços. Você vai ver que nos próximos vídeos a gente vai evoluir esses caras para pensar em alguns efeitos colaterais que esse tipo de arquitetura tem. E que faz parte do jogo quando você vai trabalhar com ela. Então, vamos nessa, galera!