Bom, pessoal, então, para resumir um pouco isso que eu acabei de falar, vamos dar uma olhada nessa pegada aqui. A gente tem essas observações. Caso não haja um API Gateway, os microsserviços precisarão da chave pública para verificar a autenticidade do token. O token normalmente possui um tempo de validade. Quanto maior a validade, menos requests teremos no AutoService. Quanto maior a validade, maior será o tempo que o usuário que venhamos desativar terá acesso ao sistema. Caso você precise invalidar um usuário imediatamente, seu microsserviço precisará acessar o AutoService a cada request para garantir que aquela requisição é válida. Você também poderá possuir um modelo híbrido, onde somente alguns microsserviços façam a validação direto no AutoService a cada request. O que a gente está querendo dizer aqui? Vamos imaginar que esses microsserviços aqui não são tão críticos. Então, se eu der um acesso de 10 minutos de validade para o token e cancelar o acesso desse usuário durante esses 10 minutos, isso significa que durante os 10 minutos aqui, aquele cara vai poder acessar. E, por acaso, pelo tipo de risco ou pelo tipo de aplicação, a gente não teria um problema tão grave. Então, fazendo isso, eu evito a sobrecarga no servidor de autenticação. Agora, vamos imaginar que esse microsserviço e esse microsserviço são extremamente críticos. Ou seja, eu quero que se eu invalidar o token, eu não quero que na próxima requisição esse usuário possa acessar. Então, não tem mágica. Se isso acontecer, significa que a cada request, esse cara aqui vai ter que bater no servidor de autenticação para validar se o usuário está válido. Ou seja, para cada vez que o usuário externo mandar uma requisição para esses microsserviços, esses microsserviços vão validar no servidor de autenticação. E estando válido, ele recebe, como se diz, ele garante que está tudo “ok”. Qual é o problema disso? Sobrecarga aqui e maior latência, porque para cada requisição que você vai responder, você vai ter que garantir que você vai acessar, através da rede, um outro sistema para validar essa autenticação. Mas isso também é válido. Porque existem casos que você falou, esse usuário está desabilitado, assim, desabilita na hora e acaba. Desabilitou na hora e acabou. E a única forma de você garantir isso é batendo a todo momento no servidor de autenticação.

Agora, se você não precisa desse efeito, desativou na hora e acabou, você pode contar com o tempo de expiração daquele token. Então, você tem essas opções que você pode trabalhar e etc. Então, assim, a autenticação não é um problema simples de ser resolvido. E é importantíssimo você entender os prós e contras. Ou seja, desativar na hora, ter esse tempo de expiração, trabalhar com a chave pública, conseguir fazer esses formatos de autenticação. Lembrando que, hoje em dia, a forma que você autentica de uma forma mais comum, é utilizando o Auth2 e o OpenID Connect em conjunto. Então, era isso que eu queria passar nesse momento, especificamente sobre autenticação, para vocês. Vamos nessa!