Bom, pessoal, no vídeo anterior eu coloquei uma provocação aqui para você. Arquiteturas distribuídas são necessárias em grandes ambientes. Eu não conheço nenhum grande ambiente mesmo que não trabalhe com arquiteturas distribuídas. “Ah, Wesley, eu conheço uns sites, uns sistemas que rodam um monolito com poucas máquinas e conseguem trabalhar”. Se você pensar, por exemplo, no Stack Overflow, eles são um case muito grande onde os caras trabalham com monolitos, conseguem otimizar com algumas máquinas, conseguem escalar o banco de dados verticalmente e conseguem ter, por exemplo, uma super velocidade e ainda conseguiram tirar o cache das aplicações deles, pela última vez que eu ouvi falar. Então isso que você está falando, como eu posso dizer? Não condiz com essa afirmação. Galera, quando eu estou falando que arquiteturas distribuídas são necessárias. Eu estou falando em aplicações que não têm 70, 100 desenvolvedores. Estou falando em aplicações, em ecossistemas que tem mil, dois mil, dez mil, quinze mil desenvolvedores. Se você tem uma empresa tão gigante onde os desenvolvedores nem se conhecem, onde eles usam sistemas de terceiros que foram criados, que eles nem conhecem a equipe que eles desenvolvem. Então, as arquiteturas distribuídas são necessárias. A gente vai falar um pouco mais sobre isso, mas para a gente esquentar esse processo, eu quero conseguir trazer aqui para vocês uma espécie de um resumo que eu criei. E lembrando que muito do que eu estou falando aqui é minha opinião, obviamente, depois eu vou passar algumas bibliografias que vão ser super importantes para vocês lerem.

Então, o seguinte, pessoal, olha só que bacana. Quando optar por um monolítico… (deixe eu só diminuir um pouco esse zoom aqui). Então o seguinte, quando eu vou optar por um sistema monolítico? Na hora de eu tomar decisão, na hora que eu for trabalhar com a minha empresa ou na hora que eu for argumentar com o meu líder, com o meu chefe, não interessa. Quando eu opto? Bom, primeiramente, não tem nada melhor do que um monolítico para você criar uma prova de conceito de um sistema que tenha a possibilidade de crescer. Você tem um sistema, você não sabe se esse sistema vai crescer, você não sabe se esse sistema vai ser uma virada de chave para empresa, pode ser uma experiência de uma nova unidade de negócio que a empresa está criando. Pode ser uma promoção ou um teste que essa empresa está fazendo e, obviamente, se é um teste, você não vai querer fazer tudo isso em microsserviços. Normalmente, quando você está fazendo isso ou até mesmo modernizando uma parte do seu sistema, você vai criar algo que a gente chama, normalmente, de arquitetura de transição, que é uma arquitetura que você cria até aquele momento para testar aquele conceito e depois disso, se bobear, você pode até jogar o código fora. Por quê? Porque toda vez que você está trabalhando em qualquer tipo de projeto, você tem algo chamado de risco. E o risco das coisas darem errado, normalmente, é muito maior do que elas darem certo. Então, para evitar esses tipos de risco, normalmente, você cria provas de conceito. Essas provas de conceito são feitas de forma mais simples e o importante de tudo é que, se ela der errada, você joga fora e, se ela der certo, eventualmente, você joga fora e faz da forma como você pensa que vai fazer sentido. Então, trabalhar com provas de conceito é uma grande sacada para você trabalhar com ambientes monolíticos.

Outra coisa, toda vez que você vai criar um novo sistema, a própria empresa, os próprios experts de domínio não conhecem todos os contextos. O próprio cliente não sabe o que ele quer e não é culpa dele, o ponto é que, quando a gente está falando em negócio, tudo vem através de uma nova descoberta e cada descoberta que você faz é um contexto diferente, é uma necessidade diferente, você tem uma necessidade de mudar completamente o modelo de negócios. Então, quando você tem certeza, a única certeza que você tem é que você não sabe tanto do sistema quanto você deveria, raramente, eu vou falar para você trabalhar com microsserviços, porque mudar, pivotar microsserviços dá muito trabalho, os contratos mudam, os sistemas mudam, a quantidade de microsserviços crescem, porque você não vai querer jogar aquele microsserviço que você fez fora. Então, nesse caso, trabalhar com sistemas monolíticos normalmente vai ser uma boa pegada, e se você conseguir criar de uma forma muito bem feita esse sistema monolítico vai está um pouco mais pronto para você quebrar esse cara em microsserviços. Não conhece todos os contextos, seu cliente não conhece todos os contextos, vocês estão no processo de descoberta, meu amigo, minha amiga, fuja de microsserviços.

E a gente tem um outro ponto importante aqui, que é o seguinte, a necessidade de realizar mudanças bruscas nas regras de negócio e funcionalidades do sistema. Quando a gente está desenvolvendo um sistema e esse sistema é novo, a empresa tem uma necessidade muito grande de fazer mudanças bruscas nessas regras de negócio. Quando você está falando em startups, então, essa parada é exponencial. Às vezes, você começa a trabalhar com uma startup onde o foco dela é atender pessoas físicas, e de repente você cria todos os microsserviços, faz todo aquele negócio para atender pessoas físicas, consultam, cria um microsserviço para consulta no Serasa, cria um outro microsserviço para negativar o cara. Cria um outro microsserviço para fazer diversas coisas e de repente a empresa percebe que o melhor mercado para ela ganhar dinheiro não vai ser atendendo pessoa física, vai ser atendendo pessoa jurídica. E você tem 10 microsserviços feitos para manter cada vez mais coeso o ambiente para validar o modelo de negócios em pessoa física. O que isso significa? Você vai ter que jogar metade do que você fez fora e o problema não é jogar fora, o problema é o setup de novo, as esteiras de CICD, os testes, é criar o projeto do zero, é o troubleshooting, é tudo aquilo que você precisa. Então, quando você tem regras de negócio mudando bruscamente, não comece a mexer com os microsserviços. Você fazendo isso vai ter um baita problema, porque você vai conseguir perceber que mudar diversos microsserviços dá muito mais trabalho do que mudar um monolito.

Por último, e não digo por último, mas agrupando um pouco essas partes, governança simplificada. O que isso significa? Significa que muitas vezes você não está trabalhando numa empresa muito grande ou a área de tecnologia dessa empresa não é muito grande, onde ela não tem uma governança, uma arquitetura corporativa clara para todos os desenvolvedores. Isso significa que uma vez que você não tem clareza disso, provavelmente o ambiente que você vai criar de microsserviços vai ser um caos. Então, trabalhar com monolitos nesse caso vale muito mais a pena, porque você tem um único sistema, uma única linguagem, um processo muito claro de desenvolvimento. As equipes organizadas, tudo para conseguir trabalhar com aquele processo. Então, se você não tem uma ótima estrutura para garantir que todo mundo consiga se falar e etc, provavelmente monolitos valem mais a pena.

Outra coisa também aqui, e aqui pode ser um pouco controverso, eu assumo, eu dei uma forçadinha na hora de colocar isso aqui, que é restrições de orçamento. O que isso significa? Normalmente trabalhar com sistemas monolíticos você gasta menos em relação a orçamento, em relação a infraestrutura, em relação a colocar o seu software no ar, em relação a observabilidade, a logs, a cache, a tracing, a monitoramento, normalmente é muito mais barato, porque você vai ter apenas um sistema para fazer isso, e se você tem uma restrição em orçamento, pode ser que se você criar um monte de microsserviços, o custo operacional vai ser muito maior e você vai estourar esse orçamento. Isso não significa que você também não pode estourar um orçamento de um monolito, mas se você estourar vai ser por outros motivos, agora esses motivos dos microsserviços são motivos claros e escancarados que vão gerar para você que vai poder sim estourar esses orçamentos.

E quando você também vai optar por um monolito, é quando você tem uma baixa quantidade de desenvolvedores. Como assim? Eu não tenho muitos desenvolvedores na minha empresa, eu não vou criar ali 10 microsserviços por desenvolvedor, é muito complexo, ou se você não tem uma governança, uma equipe de plataforma, cada vez isso vai ficar mais inviável, então, se você tem poucos desenvolvedores, vocês não vão ter grandes problemas de conflito. Vocês não vão ter grandes problemas de deploy, vocês não vão ter grandes problemas de um invadir o contexto do outro, tanto porque muitas pessoas vão poder trabalhar em diversos contextos. Então, se você tem baixa quantidade de desenvolvedores e você está começando a pensar em migrar para microsserviços, a sua equipe tem que ter uma “baita” maturidade para conseguir trabalhar com isso. Se nenhuma pessoa da sua equipe já trabalhou ou tem maturidade para trabalhar com microsserviços, jamais coloque microsserviços em um tipo desse ambiente.

Então é isso. E, no próximo vídeo, a gente vai falar quando a gente pode optar por microsserviços. Vamos nessa.

