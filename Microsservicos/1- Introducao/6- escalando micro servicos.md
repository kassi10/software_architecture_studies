Bom, pessoal, no vídeo anterior a gente falou sobre setup de microsserviços e equipes especializadas para resolver problemas de domínio. Agora, uma coisa que muita gente tem uma falsa sensação é que microsserviços escalam melhor do que monolitos. Então, assim, se você tem diversos microsserviços, e esses microsserviços cada um está ali rodando num escopo diferente e você precisa escalar somente aquele escopo, você escala somente aquele microsserviço, enquanto os outros microsserviços estão rodando ali com a sua carga menor. Quando a gente fala isso, pode parecer a maior maravilha dos mundos e de forma geral é. Você não precisa escalar um sistema inteiro por conta apenas de uma parte desse sistema. Realmente isso é muito bacana e realmente pode parecer que você está tendo economia quando você fala disso. Mas pense bem, isso que eu estou falando, que eu vou falar agora, é um pouco contraintuitivo. Por quê? Se eu consigo escalar apenas o pedaço do software que eu estou subindo, então de forma geral eu vou economizar porque eu não preciso subir tudo do mesmo software. Por outro lado, e é que é a parte contraintuitiva, é que se você tem diversos softwares no ar, você vai ter mais processos de CI e CD, onde você precisa de recurso computacional para rodar isso, você vai precisar de mais máquinas para rodar esses microsserviços, uma vez que eles são independentes e provavelmente eles vão rodar em máquinas diferentes, ou você vai precisar de um Kubernetes da vida para fazer a orquestração desse cara, e você vai precisar de um cara que gerencie bem o Kubernetes para fazer isso, você vai precisar de processos diferenciados de backup para fazer isso, ou seja, para você escalar apenas um único microsserviço, para você ter essa suposta vantagem de escalar somente aquele pedaço do sistema, você tem uma grande mudança na sua infraestrutura, que vai elevar o custo muito. Sendo que muitas vezes esse custo elevado para subir essa infraestrutura vai ser muito maior do que se você tivesse escalado vários monolitos ali naquele momento.

Você entende como muitas vezes a coisa pode ser contraintuitiva? Então, não é porque você tem a facilidade de escala de um único microsserviço que essa facilidade de escala necessariamente vai ser uma grande vantagem, principalmente em relação à parte de custos com infraestrutura. Então, guarde bem isso.

E um outro mito que ocorre muito é que muita gente fala que monolitos não escalam, e é por conta disso que você está trabalhando com microsserviços. Mas muito pelo contrário. Se o seu monolito foi feito de uma forma correta, o que vai acontecer? O seu monolito vai escalar tão bem verticalmente, quanto horizontalmente, e vai reduzir demais a sua necessidade de setup, a sua necessidade de orquestração desses serviços, vai diminuir muito, muito a complexidade, e eventualmente, e normalmente eu digo eventualmente, o custo de escalar diversos monolitos vai ser mais baixo do que escalar apenas um microsserviço e manter toda a outra infraestrutura e toda a arquitetura baseada em microsserviços ali funcionando.

Um outro ponto importante para gente levar em consideração é que quando você está trabalhando com uma arquitetura baseada em microsserviços, esses caras vão se comunicar, a gente já vai falar um pouco mais sobre esse processo de coreografia ou orquestração, e o grande ponto é que muitas vezes essa comunicação vai acontecer de forma assíncrona, e para que isso funcione de forma assíncrona, você vai precisar de um sistema de stream de dados ou um sistema de mensageria, não importa se é um RabbitMQ, ActiveMQ, um Apache Kafka, um SQS, SNS, não interessa, ou um Google PubSub, o que interessa é que você vai ter mais um serviço no ar, mais um serviço que você pode ter que gerenciar, mais um serviço que você vai ter que treinar a sua equipe e fundamentalmente você vai ter mais um custo para a sua infraestrutura. Então é contraintuitivo, mas na maioria das vezes esse argumento de que escalar microsserviços é melhor do que escalar monolitos pode cair por terra, nem sempre isso é verdade, ok, mas é importantíssimo você pensar.

E agora, galera, talvez você esteja pensando, “nossa, Wesley, você está aqui desde o começo dessas aulas malhando os microsserviços”. E por que eu estou falando isso pessoal? Porque isso é realidade. Já tem muitas empresas que tiveram muitos erros e acertos para microsserviços e talvez a sua pergunta nesse momento seja, mas aparentemente a gente tem mais desvantagem do que vantagem ao utilizar microsserviços. Para que eu vou utilizar então? Quais são as minhas principais vantagens, que vai fazer com que eu tenha muito mais complexidade, muito mais custo, muito mais devs para conseguir ter um time de plataforma para ajustar, quando isso vai fazer vantagem, quando isso vai agregar valor no negócio? A gente vai começar a falar nisso no próximo vídeo, vamos nessa!