Bom, pessoal, para a gente começar a falar sobre arquitetura baseada em microsserviços, a gente tem que falar sobre sistemas monolíticos. Porém, eu não quero ficar “chovendo muito no molhado", explicando detalhe por detalhe de sistemas monolíticos aqui para vocês. Existem algumas características que a gente vai utilizar em via de comparação entre sistemas monolíticos e microsserviços para que nós possamos entender quando utilizar microsserviços faz sentido. E no final das contas também, o que são microsserviços. Então o que eu tenho aqui? Eu tenho um pequeno resumo que aos poucos eu vou trazer aqui para vocês para eu não ficar digitando do zero no Excalidraw.

(Então deixa eu colar isso aqui para você, para que você consiga entender um pouquinho melhor). Vamos falar sobre sistemas monolíticos e o porquê esses caras são tão importantes para a gente.

Sistemas monolíticos: todos os escopos e áreas dentro de um mesmo sistema. Então, vamos imaginar que um sistema monolítico é um único sistema onde tudo está dentro desse mesmo sistema. Todos os componentes, todas as áreas, todos os contextos, tudo que você precisar utilizar vai estar dentro de um mesmo sistema. Ou seja, na maioria das vezes, quando a gente está trabalhando em alguma empresa ou a gente desenvolve algum sistema, provavelmente a gente está desenvolvendo um sistema monolítico. E para você fazer uma comunicação entre o sistema, basta instanciar uma classe, fazer uma chamada, um service, que você já vai estar falando dentro desse sistema.

Outro ponto importante aqui, todas as equipes trabalham em um mesmo sistema. Ou seja, vamos imaginar que você tem uma squad, duas, três, quatro, não interessa, e você tem que entregar, por exemplo, aquele sistema financeiro. Então as squads tentam se organizar para que uma consiga mexer numa parte diferente do sistema, inclusive para evitar tipos de conflitos, para você poder trabalhar ali com o seu monolito. Então é muito comum acontecer isso, e com certeza, para que isso aconteça, você tem que ter um mínimo de organização para evitar conflitos no Git, e inclusive também para você evitar quebrar o sistema do coleguinha que está mexendo em outra parte. Então eu não preciso nem falar aqui para você que para você trabalhar com sistemas monolíticos, inclusive com microsserviços, mas também mais especificamente com sistemas monolíticos, você precisa ter testes. Porque senão o fulano que está mexendo em uma outra parte do sistema vai quebrar a sua parte sem perceber. Então, trabalhar com testes automatizados é algo fundamental.

Um outro ponto importantíssimo quando nós estamos falando sobre sistemas monolíticos é que é muito mais fácil começar um novo projeto. Por que eu estou dizendo isso? Porque tudo vai estar no mesmo projeto, as pastas que você vai organizar vai estar no mesmo projeto, você vai evitar comunicação desnecessária, você vai evitar ficar trabalhando com filas, ficar fazendo milhares de chamadas REST para pegar os mesmos sistemas, tudo vai estar no mesmo banco de dados, para gerar relatórios vai ser mais tranquilo. Então, toda vez que você for começar um novo projeto é “muito simples”, devido às proporções e às dificuldades de negócio desse projeto, você começar ali trabalhando com um sistema monolítico.

Outro ponto importante aqui é que ele atende facilmente grande parte dos projetos em diversos tipos de empresa. O que eu estou querendo dizer com isso é o seguinte, na maioria das vezes, na maioria das empresas que você for trabalhar, provavelmente esse sistema monolítico vai atender. Por que eu estou dizendo isso? Porque vai estar tudo no mesmo sistema. É mais fácil fazer o deploy, você vai precisar apenas de uma pipeline de CISD, você vai ter que ter apenas uma organização para conseguir subir esse sistema no ar. O processo de teste é mais simples. Então, tudo acaba ficando mais tranquilo para você conseguir trabalhar. E, obviamente, quando a gente está falando em empresa, a gente está falando em dinheiro. Então, dependendo da situação, trabalhar com sistemas monolíticos vai te economizar. Você vai ter menos infraestrutura para gastar. Você vai ter menos recursos computacionais para poder fazer o deploy, então na maioria das vezes aqui também trabalhar com sistemas monolíticos vai te ajudar bastante.

Um outro ponto importante aqui, e aqui eu não digo necessariamente que é uma desvantagem, mas é uma característica que você vai ter que aprender a viver com… Que é o seguinte, você tem restrição de uso de diversas tecnologias como linguagens de programação. Como assim? Você está fazendo inteirinho o seu sistema monolítico em PHP e de repente tem uma rotina ali no seu sistema monolítico que você sabe que se fosse feito em Go, que se fosse feito em Java, ou em qualquer outra linguagem, seria mais rápido, seria mais produtivo, não interessa qual seja essa rotina. Não tem jeito, você vai ter que trabalhar e fazer essa parada com PHP. Então, é uma restrição, é o preço que você paga por ter escolhido esse tipo de decisão. Não significa que isso está errado, porém, novamente, você tem essa restrição e você vai ter que aprender a viver com essa restrição. Por outro lado, você tendo essa restrição, garante que tudo vai estar rodando de forma uniforme, ou seja, tudo com a mesma linguagem, tudo com o mesmo padrão. Os profissionais que vão estar trabalhando com esse tipo de sistema vão estar sendo treinados apenas em uma linguagem, então provavelmente em aspectos de produtividade, dependendo da situação, você vai ter uma ótima produtividade também, de forma indireta pelo fato que você tem uma restrição de uma única tecnologia.

Outro ponto importante aqui também é o processo de comunicação. Processo de comunicação é algo crítico, porque microsserviços tem diversos escopos, cada microsserviço que você vai trabalhar tem uma função pré-definida, e como essas funções podem estar em sistemas diferentes, esses sistemas, têm que sair se comunicando de todas as formas, com filas, via REST, com gRPC, com GraphQL, com diversas formas de comunicação para facilitar a vida. Agora, se tudo isso está dentro do mesmo sistema, o que acontece no final das contas? Você não tem essa preocupação. A comunicação dos dados vai acontecer em memória e somente dentro da mesma aplicação, então você está, nesse caso, nos melhores dos mundos. Você tem que evitar recursos como Circuit Breaker. Você vai ter que evitar políticas de retry, então diversas complexidades vão cair por terra, porque tudo está no mesmo sistema, inclusive a parte de troubleshooting. Se você tem um erro naquele sistema é muito mais fácil você saber onde esse erro está do que necessariamente sair caçando em diversos outros sistemas em qual momento esse erro aconteceu.

Agora, tem um ponto também importante quando a gente está falando sobre microsserviços que é a parte de deploy. Eu acredito que você já ouviu falar naquela história de: “não coloque todos os ovos na mesma cesta”. Por que eu estou dizendo isso? Porque no caso do sistema monolítico, quando você faz o deploy, o que vai acontecer? Se der errado esse deploy, tudo vai cair, todas as áreas da empresa vão cair, então é um risco maior você condensar tudo em um único sistema para quando você fizer o deploy tudo cair. Se você está trabalhando numa arquitetura baseada em microsserviços, você vai ter diversos sistemas e se apenas um cair, o que vai acontecer? Os outros vão continuar no ar. Então, é extremamente importante você entender isso e é por isso que políticas de teste, trabalhar com formatos diferentes de deploy, sei lá, um blue green, por exemplo, que replica a mesma infraestrutura e muda o tráfego para esse outro sistema, se tudo estiver “ok” ele apaga essa infraestrutura e se não tiver “ok” ele simplesmente roteia novamente para infraestrutura antiga, vai facilitar muito a sua vida.

Então, no final do dia, pessoal, o que acontece? É muito comum a gente trabalhar com sistemas monolíticos. Talvez você já tenha ouvido a falar sobre isso, trabalhar monolíticos first e coisas desse tipo, mas aqui tem algumas argumentações que eu quero trazer para você, para você guardar na sua “caixola”, vamos dizer assim, para você ter razões claras para utilizar ou não utilizar sistemas monolíticos. Então, era isso que eu queria trazer aqui para você nessa aula. Eu sei que ela ficou um pouco grandinha, mas é muito importante você ter clareza sobre tudo isso. Até o nosso próximo vídeo!