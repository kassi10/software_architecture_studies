Antes de seguir para a arquitetura, Wesley, você está aí? Se estiver, vamos conversar um pouquinho? Vamos falar. Deixa eu te fazer uma pergunta. Você que já falou com várias empresas, têm trocado bastante com a galera. Acho que a gente sempre comenta que os bancos têm uma carga histórica maior, porque são empresas mais antigas. Mas isso acontece em várias outras. Você já pegou isso com outras empresas? Na sua empresa ou em empresas parceiras, de a gente desenhar arquiteturas que são muito conectadas ou muito desacopladas, ou que não se comunicam, ou a gente briga por um stack que é o hypado do momento, mas depois nos prejudica para contratar ou resolver problemas desse cara. Você já passou por isso?

Demais. Vou ser honesto com você. Eu consigo contar nos dedos todos os projetos que comecei do zero, um novo projeto. Porque, assim, sempre temos aquela vontade de "poxa, acabou de lançar aquela tecnologia, acabou de lançar aquilo, eu já quero sair utilizando", e de repente não posso, e fico frustrado. O mais louco de tudo é que vejo muitos desenvolvedores hoje em dia mudando até de empresa porque não querem trabalhar com aquele sistema. E o que acontece? Ele muda de empresa, mas vai perceber que a história se repete. Esse é o problema. E ele vai mudando, e acaba esquecendo que a sua senioridade não é medida pela linguagem de programação que você está usando, mas sim pelo tempo que já gastou para resolver problemas. Aquela história: "Trabalhei 20 anos com PHP, resolvendo um monte de problemas." Vamos supor que eu sou um desenvolvedor sênior. E vou trabalhar, no Itaú com o Natan, e os caras só usam Kotlin. Então, agora sou um júnior? Não, porque o que acontece é que a linguagem, a tecnologia, eu vou ter que me adaptar, obviamente. Vai ter gente que tem dois anos de experiência só naquela linguagem e vai saber mais do que eu naquela linguagem. Mas o grande ponto é que a experiência que acumulei, a sola de sapato que gastei, os problemas que já sei resolver, as coisas que sei que funcionam e as que sei que não funcionam valem muito mais do que a tecnologia que vamos usar.

Então, eu sinto, e já passei por uma fase da minha carreira em que tudo o que queria fazer era o mais novo. Chegava para trabalhar em um projeto e a galera dizia: "Vamos refazer esse negócio. Olha, isso aqui está ruim, vai dar problema de manutenção." Mas, o projeto tinha três comitês por mês. Então, esse é o negócio: estamos muito orientados à tecnologia, como você falou, mas nunca orientados ao negócio. Hoje, aqui na Full Cycle, temos um programa que estava olhando agora esses comitês e é um dos nossos sistemas principais. O primeiro comitê dele foi meu em 2012, e está rodando hoje, e está rodando muito bem. E, obviamente, tem aquelas partes que são tenebrosas, que vamos trabalhando aos poucos, mas o sistema nasceu e já está funcionando desde o primeiro dia. Então, esse tipo de coisa ajudou a manter o sistema. E toda vez que alguém chega e fala "vamos refazer", eu digo: "Meu amigo, o negócio está funcionando. Só porque você não gosta daquela linguagem ou porque esse framework está mais antigo, a gente vai ter que trocar o sistema inteiro?" Assim, fico imaginando você, em bancos, que têm um trilhão de sistemas, sistemas muito antigos, sistemas muito novos, arquiteturas de transição.

Isso é uma das coisas que acho mais importante. E você falou algo que, na minha opinião, faz todo sentido: como eu gero valor entre de onde estou e onde quero chegar? Porque não adianta só demorar um ano para entregar um sistema novo, mas o que vou entregar durante esse processo?

Você consegue falar um pouco mais sobre essa arquitetura de transição?

Vou falar. Eu queria até aproveitar, dentro do que você falou, para comentar duas coisas. Tenho visto muita gente… principalmente a galera mais nova, como a gente, quando comecei na carreira, que tem a expectativa de que, se estiver rodando na linguagem mais nova, sou o cara mais ferrado. E estou com você. Várias vezes precisamos de pessoas que entendam e consigam ser resilientes para o que têm que fazer no dia a dia. Vai ter mudança de tecnologia, você vai começar uma tecnologia e, em dois anos, ela já não vai ser a mais nova. Então, isso vai acontecer. As mudanças vão acontecer. É mais sobre como você consegue lidar em ambientes complexos. Isso vai te dar uma bagagem gigantesca, do que sobre uma tecnologia específica. Acho que as tecnologias a gente vai se adaptando, não tem jeito. A gente vai ter que se adaptar cada vez mais. Talvez, quando comecei minha carreira, tínhamos menos linguagens nascendo. Hoje, eu durmo e, quando acordo, tem uma linguagem nova, tem um negócio novo chegando. Então, acho que temos que nos provocar para ver o quanto temos de história. É em cima do legado ali. Quanto já gerei de legado, que isso vai te dar bagagem, peito para chegar e falar "pode vir qualquer linguagem aqui que eu vou para cima."

E, sinceramente, a maior parte das grandes empresas terá uma bagagem de sistemas cruzados, que estarão em várias linguagens diferentes, em vários momentos diferentes, e você vai passar por isso na sua vida. Então, é legal você ter essa troca. E lembrar do seguinte: a gente dá pouco valor para quem já viveu. A galera que já fez isso, que já está há anos no mercado, conhece para caramba. É muito importante ter um cara desse do seu lado para perguntar, para falar: "Como você passou por isso? Como você resolveu aquilo?" O que eu já entrei, Wesley, em troubleshooting, de falar: "O cara manja muito tecnicamente, mas não sabe fazer um troubleshooting, não sabe como separar os assuntos para tomar uma linha de ação." Enquanto quem é mais antigão de sistema, que já mexeu 500 vezes, separa ali na hora, fatia e fala: "Para cá que eu vou. Vou tentar resolver desse jeito. Não, vou tentar liberar o sistema dessa outra maneira." A galera tem muito a ensinar. Então, acho bem importante a gente ter isso.

Sobre arquitetura de transição, eu acho que temos alguns pontos aqui. A primeira coisa, eu gosto de definir uma arquitetura-alvo para sabermos onde queremos chegar. Mas é uma provocação que faço sempre para o meu time: alguma vez chegamos em uma arquitetura-alvo? Porque definimos uma arquitetura-alvo, que é a arquitetura de tecnologia. Vamos refinar a arquitetura, colocar mais uma coisinha, outra coisinha, outra coisinha. Antigamente, desenhávamos sistemas para terminar, entregar e acabou. Hoje em dia, não terminamos, o sistema não termina. Quando você termina, volta para resolver um débito técnico, para mudar uma coisinha que você imaginou diferente, para trazer mais velocidade, mais resiliência, mais não sei o quê. Então, conforme você vai montando e entregando as arquiteturas de transição, vai tendo ideias e sacadas que podem melhorar ainda mais a sua arquitetura-alvo. Então, a arquitetura-alvo, eu costumo brincar que ela é utópica. Você não vai chegar nela. Se você chegar nela, uma hora seu sistema vai ser legado. Logo, você sempre tem que ir subindo a barra. Você cria ela agora para daqui a um ano, para todo mundo saber: "Daqui a um, dois anos, é aqui que quero chegar." Mas, no meio do caminho, ela vai se modificando. Se ela ficar estagnada, você vai deixar seu sistema para trás também. Lógico que, cada vez, você vai estar mais perto da arquitetura-alvo, mas é muito difícil você falar: "Terminou o sistema, agora não mexo mais."

As arquiteturas de transição, eu gosto de fazer coisas do tipo: vou dar alguns exemplos. Tive que fazer um projeto em que estava pegando uma plataforma inteira, tirando da Azure e trazendo para a AWS. E esse sistema tinha várias integrações. Ele era bem antigo. Sendo bem honesto, não estava muito bem feito, não estava com testes da melhor forma, pouca resiliência, um monte de coisas que dava para resolver. O que pensei foi: " preciso trazer esse cara." Ele estava nos Estados Unidos, rodava mais perto da sua casa do que da minha aqui em São Paulo. Precisávamos trazê-lo para cá, porque era mais fácil de lidar com ele aqui, teríamos um tempo de resposta melhor. Tudo bem que eu podia usar o CloudFront, mas era mais fácil trazê-lo para cá para lidarmos com ele mais perto dos nossos clientes. E tínhamos que pensar em algumas coisas de dados, porque a modelagem de dados não estava tão bem feita, etc. O que fizemos no primeiro momento foi: vamos criar um Kafka, deixá-lo rodando nos Estados Unidos e eu vou trazer para cá só o front-end. Vamos fazer o front-end e o BFF aqui.

O que isso vai trazer de benefício? Se eu só trouxer o front-end BFF para cá e deixar ele igual ao que tinha lá, para o meu cliente não mudou nada. Ele só tem mais tempo de latência, se bobear. Então, a gente pensou na latência de rede, pensou em como isso impactaria o cliente e fez um teste. O cliente fez um lab, falando: "o que te traz valor?" E a gente viu que algumas mudanças de front bem simples poderiam trazer valor.

Então, na primeira entrega, fizemos o seguinte: entregamos umas mudanças de front simples e um BFF aqui. Já fizemos uma primeira mudança, já entregamos, e o cliente achou legal. Já começamos a mexer no nosso índice de satisfação do cliente com essa primeira entrega. Os stakeholders acharam bacana, tivemos esse caso que eu te falei. Era o caso da consulta de saldo, mas a gente não tinha trazido ela ainda. Ela continuava com o tempo de demora. Na verdade, piorou: era 14 segundos, ficou 15 segundos. A gente falou: "Não, tudo bem, está ruim, mas pelo menos a experiência para o cliente do front já melhorou. Vamos para o próximo passo. Quais são as APIs que ficaram piores?" Uma delas era o contexto de saldo. "Vamos trazer escala primeiro?" Então, trouxemos e ficou bem mais rápido.

"Então vamos trazer o extrato?" Vamos. A gente começou a falar: "Olha, as arquiteturas de transição... Primeiro, eu tinha um front com BFF aqui que batia lá na conta antiga. Tudo bem, esses caras já estavam bem. Mas eu coloquei um BFF justamente para tirar o acoplamento com o front e para deixar esse cara já preparado para fazer um chaveamento quando eu trouxesse uma API para cá." Essa foi a minha crise de transição simples, mas foi a primeira que a gente fez.

O segundo passo foi trazer as APIs principais para cá, com os contextos que a gente definiu, e começar a chavear para elas. O banco de dados? Deixa lá, não tem problema. Deixa ele lá, e a gente continua apontando o banco de dados lá. O que a gente fez? Para diminuir a latência, começamos a cachear. "Vamos usar cache aqui no primeiro momento." Ah, é a melhor das experiências? Não, não é. A gente precisava, por exemplo, de consulta de saldo, que é muito dinâmica. Não é legal usar cache a todo momento. Então, falamos: "Vamos cachear no primeiro momento, até a gente tombar o dado para cá, e depois mudamos a morfologia dele para cá." 

A terceira visão da arquitetura de transição: trazer o dado do jeito que estava, depois a gente muda a morfologia dele para cá. Outra coisa muito importante foi que, durante todo esse tempo, tive muita parceria com a galera de negócio, com a galera que pensa muito no business, para definir coisas que iríamos fazer para, daqui um mês, jogar no lixo. "Vou fazer isso aqui e vou jogar no lixo. Está claro que vamos jogar no lixo." " vou fazer com observabilidade?" "Vou. Vai ser a melhor do mundo?" "Não, vai ser só para sobreviver durante dois meses. Na próxima que a gente entregar, vai ser com a melhor do mundo."

Isso ficou muito claro, porque também tínhamos um time muito maduro de liderança em cima do assunto, para chegar e falar: "Olha, tudo bem, entendemos que estamos entregando... Vou te dar um exemplo: estamos entregando observabilidade com painéis e com alertas mínimos. Mas, daqui dois meses, vamos entregar uma solução parruda." E depois de dois meses, a gente entregou.

Uma outra coisa que fazemos muito mal é que, depois que vemos o benefício, paramos de evoluir aquele assunto. O que fizemos muito bem foi definir e deixar muito claro. A gente deu as mãos e falou: "A gente vai entregar, vai jogar no lixo, e depois vai fazer melhor daqui dois meses." 

Essas foram as arquiteturas de transição que a gente definiu.