
Bom, pessoal, eu falei bastante por onde começar, por onde não começar, e agora a gente vai falar por onde começar. E a resposta para isso, pelo menos na minha opinião, e na opinião de muitos profissionais, de grandes empresas inclusive, a resposta está no middle out.

O que é middle out, Wesley? Para que essa parada funciona? Vamos dar uma olhada no slide a seguir… Olha só que interessante: middle out significa que você tem a sua aplicação, e você vai perceber que a sua aplicação normalmente tem alguns pedaços, assim, que são bem claros, eu acredito que você olhando isso aqui, vai fazer um pouco de sentido para você. Normalmente, você tem na sua aplicação… toda aplicação tem aquele monte de CRUDs sem vergonha que são fáceis de fazer. Normalmente, na sua aplicação tem aquela parte que importa, a parte complexa, a regra de negócio, ou seja, você vê que a aplicação só existe por conta dessa parte. E você também, na sua aplicação, tem partes que são detalhes. Ah, como eu configuro? Como eu vou organizar muito bem o meu processo de build? Ah, se eu vou usar uma variável de ambiente… como eu vou guardar alguns detalhezinhos? etc. etc.

Normalmente, toda aplicação tem coisas desse tipo. Então, quando a gente pensa em começar e a gente fala em middle out, a gente está pensando em: onde eu vou elaborar mais a minha aplicação? Por onde que ela tem que expandir e por onde que ela vai começar a gerar mais valor? Muitas aplicações, por incrível que pareça, por mais que elas tenham muitas regras de negócio extremamente complexas, algumas aplicações de cara começam a gerar valor para o cliente pelos CRUDs, por incrível que pareça. Você fala: “meu amigo, você tem 10 cadastros diferentes”. Começa a cadastrar, entrar com seus dados, mexer no dia a dia. O cadastro de cliente você busca, você olha isso ou aquilo e está tudo bem. Você vai entregar um monte de CRUDs logo nas primeiras sprints. Está gerando valor, porque é rápido entregar isso.

Por outro lado, o que acontece? Quando você olha dessa forma e você começa a entregar rapidamente pelos CRUDs, você fala: “poxa vida, o meu cliente está cheio de CRUD e eu vou fazer uma arquitetura decente”. E quando você vê, novamente, você virou o arquiteto de CRUD. Então, o que você tem que pensar quando você está falando na sua aplicação é o seguinte: toda vez que você for fazer qualquer tarefa semelhante a CRUDs, tarefas extremamente simples na sua aplicação, que não são o core da sua aplicação, você vai fazer uma estrutura simples de arquitetura. Óbvio, você não vai fazer de qualquer jeito, mas você não vai gastar tanta energia em criar um padrão arquitetural. Agora, conforme você vai ter que entregar tarefas que realmente importam, que é o detalhe… que é o coração do negócio, no dia zero você já vai começar de forma elaborada. 

Só de eu falar isso para você, eu não tenho dúvidas que muitas pessoas já vão dar um insight gigante. Quantas vezes eu não comecei gastando tempo com CRUD? Quantas vezes eu não dei o mesmo peso que eu dou dando para o CRUD e para o coração da minha aplicação? Então, as minhas recomendações para você são as seguintes: o que é o middle out no final das contas? O middle out no final do dia é o foco no desenvolvimento dos componentes core e mais críticos do sistema. Esse foco é importante. Você não tem que estar preocupado: “será que eu estou criando uma arquitetura muito rebuscada para isso?” Você não tem que estar preocupado, você tem que criar uma arquitetura bem rebuscada. É o coração do sistema. Você tem que ter flexibilidade. Se você começar pelo meio do sistema, ele vai permitir você fazer mudanças e eventualmente substituir ou incorporar novas tecnologias sem precisar mudar o core do sistema. O que acontece? Normalmente, quando a gente está desenvolvendo um software, quero dizer, o maior problema quando você começa a criar o core da aplicação é que você tem tanto acoplamento com vários pedaços do software que fica difícil você trocar os pedaços dele. Quando você cria uma arquitetura mais elaborada no core, mais fácil é para você quebrar o acoplamento, trocar as peças e incrementar mais a sua aplicação. Então, na minha opinião, você não tem que ter medo de criar uma arquitetura rebuscada, desde que essa arquitetura rebuscada seja no meio da aplicação. Isso vai possibilitar que você trabalhe de forma incremental. E esse trabalho incremental vai ser sustentável. Por quê? Porque as partes simples da sua aplicação você entrega rápido, já gera valor para o cara. Você não gasta muito tempo com elas e manda ver. A parte que importa, que é o que vai fazer a diferença no coração da aplicação, que é o meio, você começa rebuscando pelo meio. E você consegue crescer de forma sustentável, diminuindo o número de bugs. Por quê? Porque o que importa está muito protegido.

Eu não estou dizendo que o seu CRUD não tem que ter teste. Eu não estou dizendo que o seu CRUD com aquelas partes simples tem que ser mal feito. Não! Mas você não vai gastar o mesmo esforço que você vai ter para criar o meio da aplicação. Uma coisa que você vai perceber também é que uma vez que você começa pelo meio, pela barriga da aplicação, vamos dizer assim, você vai perceber que como você tem essa parte muito bem feita, as partes que começam a plugar na sua aplicação são mais simples. E uma vez que elas são mais simples, você consegue trocá-las facilmente e isso permite com que você escale a sua aplicação. Olha só que interessante. Às vezes, você cai numa situação que você não consegue medir… o cliente não consegue medir o quanto ele vai precisar escalar. É um produto que ele não tem dados o suficiente para trás para saber o quanto ele vai precisar escalar. Como você vai criar uma aplicação sem saber se ela vai ter que aguentar mil ou um milhão de usuários? Porque tem uma grande mudança, mas normalmente essa mudança vem em diversos periféricos, em diversos pedaços que você vai se acoplando na sua aplicação. Porque o meio dela é a parte mais estável e o meio estando mais estável você não tem medo de mexer o resto. Porque o resto, o que está na borda da sua aplicação, é o que é mais instável. E essa parte mais instável é aquela parte que você troca mais rapidamente e você ajusta. Agora eu quero o Kafka, agora eu quero o RabbitMQ, agora eu quero o gRPC, agora eu quero o HTTP. Não tem problema, isso você troca. Agora o meio da aplicação é o momento onde você consegue estabilizar o sistema. Se você consegue estabilizar o sistema ali, para fazer essa aplicação escalar é mais fácil. Porque se toda vez que você precisar um pouco mais de escala, você tiver que começar a mexer muito e mudar a arquitetura interna, você vai ter um grande problema.

E eu acabei meio que falando isso indiretamente: menor complexidade na integração com outros sistemas. Você precisa integrar com outro sistema, o core da sua aplicação não vai estar acoplado, então, você vai integrar pelas bordas da sua aplicação. Tudo muda quando você começa a crescer pelo meio. Assim, pense em nível de elaboração de arquitetura, seja rápido nas pontas, seja rebuscado no meio. Não tenha medo, pelo menos na minha opinião, de começar no dia zero com uma "puta", desculpe a palavra, desculpe o meu português, mas com uma boa arquitetura no meio da sua aplicação. Não tenha medo. Agora, nessas outras partes, vai na fé. Não existe arquitetura prematura no middle out, o coração do software, regras de negócio sempre terão que possuir a melhor arquitetura possível. As partes periféricas de suporte da aplicação não necessariamente vão ter que ter o mesmo peso.

Eu espero que essa parte middle out consiga te ajudar e gerar valor para hoje no sistema que você está trabalhando. Olhe para os sistemas que você está trabalhando, veja se você está dando o mesmo peso para barriga da sua aplicação que é, ou pelas extremidades que você está trabalhando. Você vai se surpreender com o que você já fez até hoje. Então, é isso, meu povo!